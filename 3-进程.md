# 进程

1. 进程是现代分时系统的工作单元。
2. 批处理系统执行作业，分时系统使用用户程序或任务。
3. 进程状态图：新的、就绪、允许、等待、终止。P73
4. 每个进程在操作系统内用进程控制块PCB来表示。PCB包含：进程状态、程序计数器、CPU寄存器、CPU调度信息、内存管理信息、记账西悉尼、IO状态信息。
5. 多道程序设计的目的是无论何时都有进程在运行，从而使CPU利用率达到最大化。
6. 分时系统的目的是在进程之间快速切换CPU以便用户在程序运行时能与其进行交互。
7. 进程调度选择一个可用的进程到CPU上执行，单处理器系统从不会有超过一个进程在运行，如果有多个进程，那么余下的则需要等待CPU空闲并重新调度。
8. 进程进入系统时，会被加到作业队列中，该队列包括系统中的所有进程，驻留在内存中就绪的、等待运行的进程保存在就绪队列中。等待特定IO设备的进程列表称为设备队列。每个设备都有自己的设备队列。
9. 进程被分配到CPU执行时，可能发生：进程发出一个IO请求，被放到IO队列中、进程创建一个新的子进程，并等待其结束、进程由于中断而强制释放CPU，并被放回到就绪队列中。进程调度的队列图P77。
10. 长期调度程序或作业调度程序从作业池中选择进程，并装入内存以准备执行。
11. 短期调度程序或CPU调度程序从准备执行的进程中选择进程，并为之分配CPU。
12. 这两个调度程序的主要差别是它们执行的频率。短期调度程序必须频繁地为CPU选择新进程。长期调度程序执行的并不频繁，长期调度程序控制多道程序设计的程度（内存中的进程数量）。如果多道程序的程度稳定，那么创建进程的平均速度必须等于进程离开系统的平均速度。
13. 长期调度程序应该选择一个合理的包含IO为主和CPU为主的组合进程。达到最好的性能。
14. 有的操作系统如分时系统，可能引入另外的中期调度程序，将进程从内存（或从CPU竞争）中移出，从而降低多道程序设计的程度。之后，进程被重新调入内存，并从中断处继续执行，这种方案叫做交换。为了改善进程组合，或者因内存要求的改变引起了可用内存的过度使用而需要释放内存，就有必要使用交换。
15. 当发生一个中断时，系统需要保存当前运行在CPU中进程的上下文，从而在其处理完后能恢复上下文，进程上下文用进程的PCB表示，包括CPU寄存器的值、进程状态和内存管理信息等。将CPU切换到另一个进程需要保存当前进程的状态并恢复另一个进程的状态，这一任务称为上下文切换。
16. 子进程可能从操作系统那里直接获得资源，也可能只从其父进程那里获得资源。父进程可能必须在其子进程之间分配资源或共享资源，限制子进程只能使用父进程的资源能够防止创建过多的进程带来的系统超载。
17. 进程创建时，除了得到各种物理和逻辑资源外，初始化数据由父进程传递给子进程。
18. 当进程创建新进程时，可能：父子进程并发执行、父进程等待，直到某个或全部子进程执行完。
19. 新进程的地址空间有可能：子进程是父进程的复制品（具有与父进程相同的程序和数据）、子进程装入另一个新程序。
20. 父进程终止其子进程的原因：子进程使用了超过它所分配到的一些资源、分配给子进程的任务已不再需要、父进程退出，如果父进程终止，那么操作系统不允许子进程继续（级联终止，通常由操作系统进行）。
21. 如果一个进程不能影响其他进程或被其他进程所影响，那么该进程是独立的。不与任何其他进程共享数据的进程是独立的。
22. 如果系统中一个进程能影响或被其他进程所影响，那么该进程是协作的。与其他进程共享数据的进程为协作进程。
23. 允许进程协作的理由：信息共享、提高运算速度、模块化、方便。
24. 协作进程需要进程间通信机制IPC来允许进程相互交换数据和信息，两种基本模式：共享内存、消息传递。
25. 消息传递对于交换较少数量的数据很有用，因为不需要避免冲突。
26. 共享内存比消息传递快，消息传递系统通常用系统调用来实现，因此需要更多的内核介入的时间消耗。与共享内存系统相反，仅在建立共享内存区域时需要系统调用。一旦建立了共享内存，所有的访问都被处理为常规的内存访问，不需要来自内核的帮助。
27. 消息传递可以是阻塞和非阻塞——也称为同步或异步。send()和receive()可以进行多种组合。
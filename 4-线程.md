# 线程

1. 线程是CPU使用的基本单元，由线程ID、程序计数器、寄存器集合和栈组成。
2. 线程与属于同一进程的其他线程共享代码段、数据段和其他操作系统资源，如打开文件和信号。
3. 多线程编程的优点：响应度高、资源共享、经济、多处理器体系结构的利用。
4. 用户线程受内核支持，而无须内核管理；而内核线程由操作系统直接支持和管理。
5. 多对一模型将许多用户级线程映射到一个内核线程。线程管理是由线程库在用户空间进行的，因而效率比较高。但是如果一个线程执行了阻塞系统调用，那么整个进程会阻塞，而且，因为任一时刻只有一个线程能访问内核，多个线程不能并行运行在多处理器上。
6. 一对一模型将每个用户线程映射到一个内核线程，该模型在一个线程执行阻塞系统调用时，能允许另一个线程继续执行，提供了更好的并发功能，也允许多个线程能并行地运行在多处理器系统上。缺点是每创建一个用户线程就需要创建一个相应的内核线程，创建内核线程的开销会影响应用程序的性能，而且限制了系统所支持的线程数量。
7. 多对多模型多路复用了许多用户线程到同样数量或更小数量的内核线程上。开发者可以创建任意多的用户线程，并且相应内核线程能在多处理器系统上并发执行。而且，当一个线程执行阻塞系统调用时，内核能调度另一个线程来执行。
8. 一个流行的多对多模型的变种仍然多路复用了许多用户线程到同样数量或更小数量的内核线程上，但也允许将一个用户线程绑定到某个内核线程上。这种变种有时被称为二级模型。
9. 线程取消是在线程完成之前来终止线程的任务。
10. 要取消的线程通常称为目标线程，目标线程的取消可在如下两种情况发生：异步取消（一个线程立即终止目标线程）、延迟取消（目标线程不断地检查它是否应终止，这允许目标线程有机会以有序方式终止自己）。
11. 线程池地主要思想是在进程开始时创建一定数量的线程，并放入到池中以等待工作。当服务器收到请求时，它会唤醒池中的一个线程，并将要处理的请求传递给它。一旦线程完成了服务，它会返回到池中再等待工作。如果池中没有可用的线程，那么服务器会一直等待直到有空线程为止。
12. 线程池的优点：通常用现有线程处理请求要比等待创建新的线程要快、线程池限制了在任何时候可用线程的数量，这对那些不能支持大量并发线程的系统非常重要。
13. 线程池中的线程数量由系统CPU的数量、物理内存的大小和并发客户请求的期望值等因素决定，比较高级的线程池能动态调整线程的数量，以适应具体情况。这类结构的特点时在系统负荷低时减低内存消耗。
14. 同属一个进程的线程共享进程数据，这种数据共享提供了多线程编程的一种优势。有些情况下每个线程可能需要一定数据的自己的副本。这种数据称为线程特定数据。